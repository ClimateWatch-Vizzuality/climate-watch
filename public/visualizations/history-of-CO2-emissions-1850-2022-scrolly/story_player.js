var Flourish=function(e){"use strict";function t(e,t,n,r,i){for(var o in e.getVersionNumber=function(){return e.version_number},e.setVersionNumber=function(t){e.version_number=t},e.id=t,e.version_number=n||0,r)e[o]=r[o];if(i)for(var o in i)e[o]=i[o]}function n(e,n,r){t(this,"object"==typeof n?(r=n).id:n,void 0,r),this.visualisation=e}function r(e,r,i){if(t(this,e,r,i),this.data_tables){var o=this;this.data_tables=this.data_tables.map((function(e){return new n(o,e)}))}}r.prototype.settingsForCurrentTemplate=function(){return this.settings&&this.template_id in this.settings?this.settings[this.template_id]:{}};var i="http://www.w3.org/1999/xhtml",o={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),o.hasOwnProperty(t)?{space:o[t],local:e}:e}function s(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===i&&t.documentElement.namespaceURI===i?t.createElement(e):t.createElementNS(n,e)}}function l(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function u(e){var t=a(e);return(t.local?l:s)(t)}function c(){}function d(e){return null==e?c:function(){return this.querySelector(e)}}function f(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function p(){return[]}function m(e){return function(t){return t.matches(e)}}var h=Array.prototype.find;function y(){return this.firstElementChild}var g=Array.prototype.filter;function _(){return this.children}function v(e){return new Array(e.length)}function w(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function b(e){return function(){return e}}function A(e,t,n,r,i,o){for(var a,s=0,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new w(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function T(e,t,n,r,i,o,a){var s,l,u,c=new Map,d=t.length,f=o.length,p=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(p[s]=u=a.call(l,l.__data__,s,t)+"",c.has(u)?i[s]=l:c.set(u,l));for(s=0;s<f;++s)u=a.call(e,o[s],s,o)+"",(l=c.get(u))?(r[s]=l,l.__data__=o[s],c.delete(u)):n[s]=new w(e,o[s]);for(s=0;s<d;++s)(l=t[s])&&c.get(p[s])===l&&(i[s]=l)}function S(e){return e.__data__}function E(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function x(e){return function(){this.removeAttribute(e)}}function N(e){return function(){this.removeAttributeNS(e.space,e.local)}}function L(e,t){return function(){this.setAttribute(e,t)}}function D(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function k(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function C(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function O(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function R(e){return function(){this.style.removeProperty(e)}}function M(e,t,n){return function(){this.style.setProperty(e,t,n)}}function F(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function I(e,t){return e.style.getPropertyValue(t)||O(e).getComputedStyle(e,null).getPropertyValue(t)}function U(e){return function(){delete this[e]}}function H(e,t){return function(){this[e]=t}}function P(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function z(e){return e.trim().split(/^|\s+/)}function q(e){return e.classList||new B(e)}function B(e){this._node=e,this._names=z(e.getAttribute("class")||"")}function W(e,t){for(var n=q(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function G(e,t){for(var n=q(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function j(e){return function(){W(this,e)}}function Y(e){return function(){G(this,e)}}function V(e,t){return function(){(t.apply(this,arguments)?W:G)(this,e)}}function X(){this.textContent=""}function $(e){return function(){this.textContent=e}}function K(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function J(){this.innerHTML=""}function Z(e){return function(){this.innerHTML=e}}function Q(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function ee(){this.nextSibling&&this.parentNode.appendChild(this)}function te(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ne(){return null}function re(){var e=this.parentNode;e&&e.removeChild(this)}function ie(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function oe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ae(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function se(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function le(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function ue(e,t,n){var r=O(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ce(e,t){return function(){return ue(this,e,t)}}function de(e,t){return function(){return ue(this,e,t.apply(this,arguments))}}w.prototype={constructor:w,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},B.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var fe=[null];function pe(e,t){this._groups=e,this._parents=t}function me(e){return e.forEach((e=>{null!==e&&"object"==typeof e&&Object.keys(e).forEach((t=>e[t]+=""))})),e}function he(e){if(!e||"function"!=typeof e){var t=Array.prototype.slice.call(arguments,1);if("event"===e)for(var n=0;n<t.length;n++)"object"==typeof t[n]&&"event_callback"in t[n]&&t[n].event_callback()}}function ye(e,t){if(!window.location.hostname.match(/\.flourish\.studio$/))return window.gtag=he;(function(e){return"string"==typeof e?new pe([[document.querySelector(e)]],[document.documentElement]):new pe([[e]],fe)})("head").append("script").attr("async",!0).attr("src","https://www.googletagmanager.com/gtag/js?id=G-KW52XHYN9H"),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)};var n={cookie_domain:"flourish.studio"};void 0===t?gtag("consent","default",{ad_storage:"denied",analytics_storage:"denied",functionality_storage:"denied",personalization_storage:"denied",security_storage:"denied"}):n.user_id=t.id,gtag("js",new Date),gtag("config","G-KW52XHYN9H",n),void 0!==t&&(gtag("set",{dimension1:t.id}),t.company_type?gtag("set",{dimension3:"other"==t.company_type?"corporate":t.company_type}):gtag("set",{dimension3:t.has_active_subscription?"personal":"free"}));var r=new Date;return gtag("set",{dimension2:r.toISOString()}),function(){arguments.length>=3&&"event"===arguments[0]&&(window._mfq=window._mfq||[],window._mfq.push(["setVariable",arguments[1],arguments[2]])),window.gtag.apply(window.gtag,me(Array.prototype.slice.call(arguments)))}}pe.prototype={constructor:pe,select:function(e){"function"!=typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,u=r[i]=new Array(l),c=0;c<l;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new pe(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:f(t)}}(e):function(e){return null==e?p:function(){return this.querySelectorAll(e)}}(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(e.call(a,a.__data__,u,s)),i.push(a));return new pe(r,i)},selectChild:function(e){return this.select(null==e?y:function(e){return function(){return h.call(this.children,e)}}("function"==typeof e?e:m(e)))},selectChildren:function(e){return this.selectAll(null==e?_:function(e){return function(){return g.call(this.children,e)}}("function"==typeof e?e:m(e)))},filter:function(e){"function"!=typeof e&&(e=function(e){return function(){return this.matches(e)}}(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new pe(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,S);var n=t?T:A,r=this._parents,i=this._groups;"function"!=typeof e&&(e=b(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],d=i[u],p=d.length,m=f(e.call(c,c&&c.__data__,u,r)),h=m.length,y=s[u]=new Array(h),g=a[u]=new Array(h),_=l[u]=new Array(p);n(c,d,y,g,_,m,t);for(var v,w,E=0,x=0;E<h;++E)if(v=y[E]){for(E>=x&&(x=E+1);!(w=g[x])&&++x<h;);v._next=w||null}}return(a=new pe(a,r))._enter=s,a._exit=l,a},enter:function(){return new pe(this._enter||this._groups.map(v),this._parents)},exit:function(){return new pe(this._exit||this._groups.map(v),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof pe))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=t[s],c=n[s],d=u.length,f=a[s]=new Array(d),p=0;p<d;++p)(l=u[p]||c[p])&&(f[p]=l);for(;s<r;++s)a[s]=t[s];return new pe(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=E);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new pe(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=a(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?N:x:"function"==typeof t?n.local?C:k:n.local?D:L)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?R:"function"==typeof t?F:M)(e,t,null==n?"":n)):I(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?U:"function"==typeof t?P:H)(e,t)):this.node()[e]},classed:function(e,t){var n=z(e+"");if(arguments.length<2){for(var r=q(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?V:t?j:Y)(n,t))},text:function(e){return arguments.length?this.each(null==e?X:("function"==typeof e?K:$)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?J:("function"==typeof e?Q:Z)(e)):this.node().innerHTML},raise:function(){return this.each(ee)},lower:function(){return this.each(te)},append:function(e){var t="function"==typeof e?e:u(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:u(e),r=null==t?ne:"function"==typeof t?t:d(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(re)},clone:function(e){return this.select(e?oe:ie)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=ae(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?le:se,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?de:ce)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var ge,_e,ve,we,be=!1,Ae=!1,Te=null,Se=!1;function Ee(){this._current_time=0,this.paused=!0,this._listeners=[]}function xe(){var e=document.querySelector(".play-pause.small"),t=document.querySelector(".play-pause.large");if(t)if(e){e=e.getBoundingClientRect();var n=getComputedStyle(t),r=parseInt(n.left),i=parseInt(n.top),o=null;requestAnimationFrame((function n(a){null==o&&(o=a);var s=a-o,l=Math.min(1,Math.max(0,s/1e3)),u=51*(1-l),c=51*(1-l),d=51*(1-l),f=1-l+.3*l,p=-50*(1-l)+"%",m=-50*(1-l)+"%",h=2.5*(1-l)+1*l;t.style.left=r*(1-l)+(e.left||0)*l+"px",t.style.top=i*(1-l)+(e.top||0)*l+"px",t.style.transform="translate("+p+","+m+") scale("+h+")",t.style.background="rgba("+u+","+c+","+d+","+f+")",l<1?requestAnimationFrame(n):t.parentNode.removeChild(t)}))}else t.parentNode.removeChild(t)}function Ne(){_e.paused?Le():De()}function Le(){ke(_e.currentTime)>=ge.story.slides.length&&(_e.currentTime=0),_e.play();for(var e=document.querySelectorAll("nav .play-pause"),t=0;t<e.length;t++)e[t].classList.add("playing");Ae||xe(),Ae=!0}function De(){_e.pause();for(var e=document.querySelectorAll("nav .play-pause"),t=0;t<e.length;t++)e[t].classList.remove("playing")}function ke(e){for(var t=we.length-1;t>=0;t--)if(e>=we[t])return t}function Ce(){var e=ke(this.currentTime);ge.current_slide.index!==e?e!==Te&&(e<ge.story.slides.length?(be=ve(e),Te=e):(De(),ge.story.loops_at_end&&Le())):Te=null}function Oe(){_e&&_e.removeEventListener("timeupdate",Ce),(ge.story.is_timed||Se)&&"scrolly"!==ge.story.presentation_mode?(_e=ge.story.audio_url?document.getElementById("story-audio-file"):new Ee).addEventListener("timeupdate",Ce):_e=null}function Re(){var e=0;we=[0];for(var t=0;t<ge.story.slides.length;t++){var n=ge.story.slides[t];e+=null==n.duration?ge.story.default_slide_duration:n.duration,we.push(e)}}function Me(e){_e&&(be?be=!1:_e.currentTime=we[e])}Ee.prototype={get currentTime(){return this._current_time},set currentTime(e){void 0!==this._played_from&&(this._played_from+=e-this._current_time),this._current_time=e}},Ee.prototype.addEventListener=function(e,t){if("timeupdate"!==e)throw new Error("Event type unsupported - must be timeupdate, not "+e);this._listeners.push(t)},Ee.prototype.removeEventListener=function(e,t){if("timeupdate"!==e)throw new Error("Event type unsupported - must be timeupdate, not "+e);this._listeners=[]},Ee.prototype.play=function(){var e=this;this.paused=!1,this._played_from=e._current_time,this._t0=null,requestAnimationFrame((function t(n){e.paused||((null==e._t0||n<e._t0)&&(e._t0=n),e._current_time=Math.max(0,e._played_from+(n-e._t0)/1e3),e._listeners.forEach((function(t){t.call(e)})),requestAnimationFrame(t))})),Ae||xe(),Ae=!0},Ee.prototype.pause=function(){this.paused=!0};var Fe=Object.hasOwnProperty,Ie=Object.setPrototypeOf,Ue=Object.isFrozen,He=Object.getPrototypeOf,Pe=Object.getOwnPropertyDescriptor,ze=Object.freeze,qe=Object.seal,Be=Object.create,We="undefined"!=typeof Reflect&&Reflect,Ge=We.apply,je=We.construct;Ge||(Ge=function(e,t,n){return e.apply(t,n)}),ze||(ze=function(e){return e}),qe||(qe=function(e){return e}),je||(je=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(
/*! @license DOMPurify | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.2.2/LICENSE */
function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var Ye,Ve=rt(Array.prototype.forEach),Xe=rt(Array.prototype.pop),$e=rt(Array.prototype.push),Ke=rt(String.prototype.toLowerCase),Je=rt(String.prototype.match),Ze=rt(String.prototype.replace),Qe=rt(String.prototype.indexOf),et=rt(String.prototype.trim),tt=rt(RegExp.prototype.test),nt=(Ye=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return je(Ye,t)});function rt(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Ge(e,t,r)}}function it(e,t){Ie&&Ie(e,null);for(var n=t.length;n--;){var r=t[n];if("string"==typeof r){var i=Ke(r);i!==r&&(Ue(t)||(t[n]=i),r=i)}e[r]=!0}return e}function ot(e){var t=Be(null),n=void 0;for(n in e)Ge(Fe,e,[n])&&(t[n]=e[n]);return t}function at(e,t){for(;null!==e;){var n=Pe(e,t);if(n){if(n.get)return rt(n.get);if("function"==typeof n.value)return rt(n.value)}e=He(e)}return function(e){return console.warn("fallback value for",e),null}}var st=ze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),lt=ze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ut=ze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ct=ze(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),dt=ze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ft=ze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),pt=ze(["#text"]),mt=ze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ht=ze(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),yt=ze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gt=ze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),_t=qe(/\{\{[\s\S]*|[\s\S]*\}\}/gm),vt=qe(/<%[\s\S]*|[\s\S]*%>/gm),wt=qe(/^data-[\-\w.\u00B7-\uFFFF]/),bt=qe(/^aria-[\-\w]+$/),At=qe(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Tt=qe(/^(?:\w+script|data):/i),St=qe(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function xt(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Nt=function(){return"undefined"==typeof window?null:window},Lt=function(e,t){if("object"!==(void 0===e?"undefined":Et(e))||"function"!=typeof e.createPolicy)return null;var n=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};var Dt,kt,Ct=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt(),n=function(t){return e(t)};if(n.version="2.2.8",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var r=t.document,i=t.document,o=t.DocumentFragment,a=t.HTMLTemplateElement,s=t.Node,l=t.Element,u=t.NodeFilter,c=t.NamedNodeMap,d=void 0===c?t.NamedNodeMap||t.MozNamedAttrMap:c,f=t.Text,p=t.Comment,m=t.DOMParser,h=t.trustedTypes,y=l.prototype,g=at(y,"cloneNode"),_=at(y,"nextSibling"),v=at(y,"childNodes"),w=at(y,"parentNode");if("function"==typeof a){var b=i.createElement("template");b.content&&b.content.ownerDocument&&(i=b.content.ownerDocument)}var A=Lt(h,r),T=A&&ee?A.createHTML(""):"",S=i,E=S.implementation,x=S.createNodeIterator,N=S.createDocumentFragment,L=r.importNode,D={};try{D=ot(i).documentMode?i.documentMode:{}}catch(e){}var k={};n.isSupported="function"==typeof w&&E&&void 0!==E.createHTMLDocument&&9!==D;var C=_t,O=vt,R=wt,M=bt,F=Tt,I=St,U=At,H=null,P=it({},[].concat(xt(st),xt(lt),xt(ut),xt(dt),xt(pt))),z=null,q=it({},[].concat(xt(mt),xt(ht),xt(yt),xt(gt))),B=null,W=null,G=!0,j=!0,Y=!1,V=!1,X=!1,$=!1,K=!1,J=!1,Z=!1,Q=!0,ee=!1,te=!0,ne=!0,re=!1,ie={},oe=it({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ae=null,se=it({},["audio","video","img","source","image","track"]),le=null,ue=it({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),ce="http://www.w3.org/1998/Math/MathML",de="http://www.w3.org/2000/svg",fe="http://www.w3.org/1999/xhtml",pe=fe,me=null,he=i.createElement("form"),ye=function(e){me&&me===e||(e&&"object"===(void 0===e?"undefined":Et(e))||(e={}),e=ot(e),H="ALLOWED_TAGS"in e?it({},e.ALLOWED_TAGS):P,z="ALLOWED_ATTR"in e?it({},e.ALLOWED_ATTR):q,le="ADD_URI_SAFE_ATTR"in e?it(ot(ue),e.ADD_URI_SAFE_ATTR):ue,ae="ADD_DATA_URI_TAGS"in e?it(ot(se),e.ADD_DATA_URI_TAGS):se,B="FORBID_TAGS"in e?it({},e.FORBID_TAGS):{},W="FORBID_ATTR"in e?it({},e.FORBID_ATTR):{},ie="USE_PROFILES"in e&&e.USE_PROFILES,G=!1!==e.ALLOW_ARIA_ATTR,j=!1!==e.ALLOW_DATA_ATTR,Y=e.ALLOW_UNKNOWN_PROTOCOLS||!1,V=e.SAFE_FOR_TEMPLATES||!1,X=e.WHOLE_DOCUMENT||!1,J=e.RETURN_DOM||!1,Z=e.RETURN_DOM_FRAGMENT||!1,Q=!1!==e.RETURN_DOM_IMPORT,ee=e.RETURN_TRUSTED_TYPE||!1,K=e.FORCE_BODY||!1,te=!1!==e.SANITIZE_DOM,ne=!1!==e.KEEP_CONTENT,re=e.IN_PLACE||!1,U=e.ALLOWED_URI_REGEXP||U,pe=e.NAMESPACE||pe,V&&(j=!1),Z&&(J=!0),ie&&(H=it({},[].concat(xt(pt))),z=[],!0===ie.html&&(it(H,st),it(z,mt)),!0===ie.svg&&(it(H,lt),it(z,ht),it(z,gt)),!0===ie.svgFilters&&(it(H,ut),it(z,ht),it(z,gt)),!0===ie.mathMl&&(it(H,dt),it(z,yt),it(z,gt))),e.ADD_TAGS&&(H===P&&(H=ot(H)),it(H,e.ADD_TAGS)),e.ADD_ATTR&&(z===q&&(z=ot(z)),it(z,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&it(le,e.ADD_URI_SAFE_ATTR),ne&&(H["#text"]=!0),X&&it(H,["html","head","body"]),H.table&&(it(H,["tbody"]),delete B.tbody),ze&&ze(e),me=e)},ge=it({},["mi","mo","mn","ms","mtext"]),_e=it({},["foreignobject","desc","title","annotation-xml"]),ve=it({},lt);it(ve,ut),it(ve,ct);var we=it({},dt);it(we,ft);var be=function(e){var t=w(e);t&&t.tagName||(t={namespaceURI:fe,tagName:"template"});var n=Ke(e.tagName),r=Ke(t.tagName);if(e.namespaceURI===de)return t.namespaceURI===fe?"svg"===n:t.namespaceURI===ce?"svg"===n&&("annotation-xml"===r||ge[r]):Boolean(ve[n]);if(e.namespaceURI===ce)return t.namespaceURI===fe?"math"===n:t.namespaceURI===de?"math"===n&&_e[r]:Boolean(we[n]);if(e.namespaceURI===fe){if(t.namespaceURI===de&&!_e[r])return!1;if(t.namespaceURI===ce&&!ge[r])return!1;var i=it({},["title","style","font","a","script"]);return!we[n]&&(i[n]||!ve[n])}return!1},Ae=function(e){$e(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=T}catch(t){e.remove()}}},Te=function(e,t){try{$e(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){$e(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!z[e])if(J||Z)try{Ae(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Se=function(e){var t=void 0,n=void 0;if(K)e="<remove></remove>"+e;else{var r=Je(e,/^[\r\n\t ]+/);n=r&&r[0]}var o=A?A.createHTML(e):e;if(pe===fe)try{t=(new m).parseFromString(o,"text/html")}catch(e){}t&&t.documentElement||((t=E.createDocument(pe,"template",null)).documentElement.innerHTML=o);var a=t.body||t.documentElement;return e&&n&&a.insertBefore(i.createTextNode(n),a.childNodes[0]||null),X?t.documentElement:a},Ee=function(e){return x.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,(function(){return u.FILTER_ACCEPT}),!1)},xe=function(e){return!(e instanceof f||e instanceof p)&&!("string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof d&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)},Ne=function(e){return"object"===(void 0===s?"undefined":Et(s))?e instanceof s:e&&"object"===(void 0===e?"undefined":Et(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Le=function(e,t,r){k[e]&&Ve(k[e],(function(e){e.call(n,t,r,me)}))},De=function(e){var t=void 0;if(Le("beforeSanitizeElements",e,null),xe(e))return Ae(e),!0;if(Je(e.nodeName,/[\u0080-\uFFFF]/))return Ae(e),!0;var r=Ke(e.nodeName);if(Le("uponSanitizeElement",e,{tagName:r,allowedTags:H}),!Ne(e.firstElementChild)&&(!Ne(e.content)||!Ne(e.content.firstElementChild))&&tt(/<[/\w]/g,e.innerHTML)&&tt(/<[/\w]/g,e.textContent))return Ae(e),!0;if(!H[r]||B[r]){if(ne&&!oe[r]){var i=w(e)||e.parentNode,o=v(e)||e.childNodes;if(o&&i)for(var a=o.length-1;a>=0;--a)i.insertBefore(g(o[a],!0),_(e))}return Ae(e),!0}return e instanceof l&&!be(e)?(Ae(e),!0):"noscript"!==r&&"noembed"!==r||!tt(/<\/no(script|embed)/i,e.innerHTML)?(V&&3===e.nodeType&&(t=e.textContent,t=Ze(t,C," "),t=Ze(t,O," "),e.textContent!==t&&($e(n.removed,{element:e.cloneNode()}),e.textContent=t)),Le("afterSanitizeElements",e,null),!1):(Ae(e),!0)},ke=function(e,t,n){if(te&&("id"===t||"name"===t)&&(n in i||n in he))return!1;if(j&&tt(R,t));else if(G&&tt(M,t));else{if(!z[t]||W[t])return!1;if(le[t]);else if(tt(U,Ze(n,I,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Qe(n,"data:")||!ae[e]){if(Y&&!tt(F,Ze(n,I,"")));else if(n)return!1}else;}return!0},Ce=function(e){var t=void 0,r=void 0,i=void 0,o=void 0;Le("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z};for(o=a.length;o--;){var l=t=a[o],u=l.name,c=l.namespaceURI;if(r=et(t.value),i=Ke(u),s.attrName=i,s.attrValue=r,s.keepAttr=!0,s.forceKeepAttr=void 0,Le("uponSanitizeAttribute",e,s),r=s.attrValue,!s.forceKeepAttr&&(Te(u,e),s.keepAttr))if(tt(/\/>/i,r))Te(u,e);else{V&&(r=Ze(r,C," "),r=Ze(r,O," "));var d=e.nodeName.toLowerCase();if(ke(d,i,r))try{c?e.setAttributeNS(c,u,r):e.setAttribute(u,r),Xe(n.removed)}catch(e){}}}Le("afterSanitizeAttributes",e,null)}},Oe=function e(t){var n=void 0,r=Ee(t);for(Le("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)Le("uponSanitizeShadowNode",n,null),De(n)||(n.content instanceof o&&e(n.content),Ce(n));Le("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,i){var a=void 0,l=void 0,u=void 0,c=void 0,d=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!Ne(e)){if("function"!=typeof e.toString)throw nt("toString is not a function");if("string"!=typeof(e=e.toString()))throw nt("dirty is not a string, aborting")}if(!n.isSupported){if("object"===Et(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(Ne(e))return t.toStaticHTML(e.outerHTML)}return e}if($||ye(i),n.removed=[],"string"==typeof e&&(re=!1),re);else if(e instanceof s)1===(l=(a=Se("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?a=l:a.appendChild(l);else{if(!J&&!V&&!X&&-1===e.indexOf("<"))return A&&ee?A.createHTML(e):e;if(!(a=Se(e)))return J?null:T}a&&K&&Ae(a.firstChild);for(var f=Ee(re?e:a);u=f.nextNode();)3===u.nodeType&&u===c||De(u)||(u.content instanceof o&&Oe(u.content),Ce(u),c=u);if(c=null,re)return e;if(J){if(Z)for(d=N.call(a.ownerDocument);a.firstChild;)d.appendChild(a.firstChild);else d=a;return Q&&(d=L.call(r,d,!0)),d}var p=X?a.outerHTML:a.innerHTML;return V&&(p=Ze(p,C," "),p=Ze(p,O," ")),A&&ee?A.createHTML(p):p},n.setConfig=function(e){ye(e),$=!0},n.clearConfig=function(){me=null,$=!1},n.isValidAttribute=function(e,t,n){me||ye({});var r=Ke(e),i=Ke(t);return ke(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&(k[e]=k[e]||[],$e(k[e],t))},n.removeHook=function(e){k[e]&&Xe(k[e])},n.removeHooks=function(e){k[e]&&(k[e]=[])},n.removeAllHooks=function(){k={}},n}();function Ot(e){if(!e)return!1;var t=e.tagName;if("TEXTAREA"===t||"INPUT"===t)return!0;for(;e.parentNode;){if(e.isContentEditable)return!0;e=e.parentNode}return!1}function Rt(e){Ot(e.target)||32!=e.keyCode&&38!=e.keyCode&&40!=e.keyCode&&33!=e.keyCode&&34!=e.keyCode||e.preventDefault()}function Mt(e){Ot(e.target)||(39!=e.keyCode&&40!=e.keyCode&&32!=e.keyCode&&34!=e.keyCode||kt(),37!=e.keyCode&&38!=e.keyCode&&33!=e.keyCode||Dt())}function Ft(e){null==e&&(e="");var t=document.querySelector(".story-furniture .caption");t&&(t.innerHTML=Ct.sanitize(e))}Ct.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))}));var It=!1;function Ut(e){if(It&&window.top!==window.self){var t=window;"srcdoc"===t.location.pathname&&(t=t.parent);var n,r=(n={},window._Flourish_template_id&&(n.template_id=window._Flourish_template_id),window.Flourish&&window.Flourish.app&&window.Flourish.app.loaded_template_id&&(n.template_id=window.Flourish.app.loaded_template_id),window._Flourish_visualisation_id&&(n.visualisation_id=window._Flourish_visualisation_id),window.Flourish&&window.Flourish.app&&window.Flourish.app.loaded_visualisation&&(n.visualisation_id=window.Flourish.app.loaded_visualisation.id),window.Flourish&&window.Flourish.app&&window.Flourish.app.story&&(n.story_id=window.Flourish.app.story.id,n.slide_count=window.Flourish.app.story.slides.length),window.Flourish&&window.Flourish.app&&window.Flourish.app.current_slide&&(n.slide_index=window.Flourish.app.current_slide.index+1),n),i={sender:"Flourish",method:"customerAnalytics"};for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);t.parent.postMessage(JSON.stringify(i),"*")}}function Ht(e){if("function"!=typeof e)throw new Error("Analytics callback is not a function");window.Flourish._analytics_listeners.push(e)}function Pt(){It=!0;[{event_name:"click",action_name:"click",use_capture:!0},{event_name:"keydown",action_name:"key_down",use_capture:!0},{event_name:"mouseenter",action_name:"mouse_enter",use_capture:!1},{event_name:"mouseleave",action_name:"mouse_leave",use_capture:!1}].forEach((function(e){document.body.addEventListener(e.event_name,(function(){Ut({action:e.action_name})}),e.use_capture)}))}
/*! @license DOMPurify 3.1.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.4/LICENSE */const{entries:zt,setPrototypeOf:qt,isFrozen:Bt,getPrototypeOf:Wt,getOwnPropertyDescriptor:Gt}=Object;let{freeze:jt,seal:Yt,create:Vt}=Object,{apply:Xt,construct:$t}="undefined"!=typeof Reflect&&Reflect;jt||(jt=function(e){return e}),Yt||(Yt=function(e){return e}),Xt||(Xt=function(e,t,n){return e.apply(t,n)}),$t||($t=function(e,t){return new e(...t)});const Kt=cn(Array.prototype.forEach),Jt=cn(Array.prototype.pop),Zt=cn(Array.prototype.push),Qt=cn(String.prototype.toLowerCase),en=cn(String.prototype.toString),tn=cn(String.prototype.match),nn=cn(String.prototype.replace),rn=cn(String.prototype.indexOf),on=cn(String.prototype.trim),an=cn(Object.prototype.hasOwnProperty),sn=cn(RegExp.prototype.test),ln=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $t(e,n)}}(TypeError);function un(e){return"number"==typeof e&&isNaN(e)}function cn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Xt(e,t,r)}}function dn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qt;qt&&qt(e,null);let r=t.length;for(;r--;){let i=t[r];if("string"==typeof i){const e=n(i);e!==i&&(Bt(t)||(t[r]=e),i=e)}e[i]=!0}return e}function fn(e){for(let t=0;t<e.length;t++){an(e,t)||(e[t]=null)}return e}function pn(e){const t=Vt(null);for(const[n,r]of zt(e)){an(e,n)&&(Array.isArray(r)?t[n]=fn(r):r&&"object"==typeof r&&r.constructor===Object?t[n]=pn(r):t[n]=r)}return t}function mn(e,t){for(;null!==e;){const n=Gt(e,t);if(n){if(n.get)return cn(n.get);if("function"==typeof n.value)return cn(n.value)}e=Wt(e)}return function(){return null}}const hn=jt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),yn=jt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),gn=jt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_n=jt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),vn=jt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),wn=jt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),bn=jt(["#text"]),An=jt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Tn=jt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Sn=jt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),En=jt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),xn=Yt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Nn=Yt(/<%[\w\W]*|[\w\W]*%>/gm),Ln=Yt(/\${[\w\W]*}/gm),Dn=Yt(/^data-[\-\w.\u00B7-\uFFFF]/),kn=Yt(/^aria-[\-\w]+$/),Cn=Yt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),On=Yt(/^(?:\w+script|data):/i),Rn=Yt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Mn=Yt(/^html$/i),Fn=Yt(/^[a-z][.\w]*(-[.\w]+)+$/i);var In=Object.freeze({__proto__:null,MUSTACHE_EXPR:xn,ERB_EXPR:Nn,TMPLIT_EXPR:Ln,DATA_ATTR:Dn,ARIA_ATTR:kn,IS_ALLOWED_URI:Cn,IS_SCRIPT_OR_DATA:On,ATTR_WHITESPACE:Rn,DOCTYPE_NAME:Mn,CUSTOM_ELEMENT:Fn});const Un=1,Hn=3,Pn=7,zn=8,qn=9,Bn=function(){return"undefined"==typeof window?null:window},Wn=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};var Gn,jn,Yn,Vn,Xn,$n,Kn,Jn,Zn,Qn=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn();const n=t=>e(t);if(n.version="3.1.4",n.removed=[],!t||!t.document||t.document.nodeType!==qn)return n.isSupported=!1,n;let{document:r}=t;const i=r,o=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:l,Element:u,NodeFilter:c,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:m}=t,h=u.prototype,y=mn(h,"cloneNode"),g=mn(h,"nextSibling"),_=mn(h,"childNodes"),v=mn(h,"parentNode");if("function"==typeof s){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let w,b="";const{implementation:A,createNodeIterator:T,createDocumentFragment:S,getElementsByTagName:E}=r,{importNode:x}=i;let N={};n.isSupported="function"==typeof zt&&"function"==typeof v&&A&&void 0!==A.createHTMLDocument;const{MUSTACHE_EXPR:L,ERB_EXPR:D,TMPLIT_EXPR:k,DATA_ATTR:C,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:R,ATTR_WHITESPACE:M,CUSTOM_ELEMENT:F}=In;let{IS_ALLOWED_URI:I}=In,U=null;const H=dn({},[...hn,...yn,...gn,...vn,...bn]);let P=null;const z=dn({},[...An,...Tn,...Sn,...En]);let q=Object.seal(Vt(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),B=null,W=null,G=!0,j=!0,Y=!1,V=!0,X=!1,$=!0,K=!1,J=!1,Z=!1,Q=!1,ee=!1,te=!1,ne=!0,re=!1;const ie="user-content-";let oe=!0,ae=!1,se={},le=null;const ue=dn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ce=null;const de=dn({},["audio","video","img","source","image","track"]);let fe=null;const pe=dn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),me="http://www.w3.org/1998/Math/MathML",he="http://www.w3.org/2000/svg",ye="http://www.w3.org/1999/xhtml";let ge=ye,_e=!1,ve=null;const we=dn({},[me,he,ye],en);let be=null;const Ae=["application/xhtml+xml","text/html"],Te="text/html";let Se=null,Ee=null;const xe=255,Ne=r.createElement("form"),Le=function(e){return e instanceof RegExp||e instanceof Function},De=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ee||Ee!==e){if(e&&"object"==typeof e||(e={}),e=pn(e),be=-1===Ae.indexOf(e.PARSER_MEDIA_TYPE)?Te:e.PARSER_MEDIA_TYPE,Se="application/xhtml+xml"===be?en:Qt,U=an(e,"ALLOWED_TAGS")?dn({},e.ALLOWED_TAGS,Se):H,P=an(e,"ALLOWED_ATTR")?dn({},e.ALLOWED_ATTR,Se):z,ve=an(e,"ALLOWED_NAMESPACES")?dn({},e.ALLOWED_NAMESPACES,en):we,fe=an(e,"ADD_URI_SAFE_ATTR")?dn(pn(pe),e.ADD_URI_SAFE_ATTR,Se):pe,ce=an(e,"ADD_DATA_URI_TAGS")?dn(pn(de),e.ADD_DATA_URI_TAGS,Se):de,le=an(e,"FORBID_CONTENTS")?dn({},e.FORBID_CONTENTS,Se):ue,B=an(e,"FORBID_TAGS")?dn({},e.FORBID_TAGS,Se):{},W=an(e,"FORBID_ATTR")?dn({},e.FORBID_ATTR,Se):{},se=!!an(e,"USE_PROFILES")&&e.USE_PROFILES,G=!1!==e.ALLOW_ARIA_ATTR,j=!1!==e.ALLOW_DATA_ATTR,Y=e.ALLOW_UNKNOWN_PROTOCOLS||!1,V=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,X=e.SAFE_FOR_TEMPLATES||!1,$=!1!==e.SAFE_FOR_XML,K=e.WHOLE_DOCUMENT||!1,Q=e.RETURN_DOM||!1,ee=e.RETURN_DOM_FRAGMENT||!1,te=e.RETURN_TRUSTED_TYPE||!1,Z=e.FORCE_BODY||!1,ne=!1!==e.SANITIZE_DOM,re=e.SANITIZE_NAMED_PROPS||!1,oe=!1!==e.KEEP_CONTENT,ae=e.IN_PLACE||!1,I=e.ALLOWED_URI_REGEXP||Cn,ge=e.NAMESPACE||ye,q=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Le(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Le(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(q.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X&&(j=!1),ee&&(Q=!0),se&&(U=dn({},bn),P=[],!0===se.html&&(dn(U,hn),dn(P,An)),!0===se.svg&&(dn(U,yn),dn(P,Tn),dn(P,En)),!0===se.svgFilters&&(dn(U,gn),dn(P,Tn),dn(P,En)),!0===se.mathMl&&(dn(U,vn),dn(P,Sn),dn(P,En))),e.ADD_TAGS&&(U===H&&(U=pn(U)),dn(U,e.ADD_TAGS,Se)),e.ADD_ATTR&&(P===z&&(P=pn(P)),dn(P,e.ADD_ATTR,Se)),e.ADD_URI_SAFE_ATTR&&dn(fe,e.ADD_URI_SAFE_ATTR,Se),e.FORBID_CONTENTS&&(le===ue&&(le=pn(le)),dn(le,e.FORBID_CONTENTS,Se)),oe&&(U["#text"]=!0),K&&dn(U,["html","head","body"]),U.table&&(dn(U,["tbody"]),delete B.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw ln('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw ln('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=e.TRUSTED_TYPES_POLICY,b=w.createHTML("")}else void 0===w&&(w=Wn(m,o)),null!==w&&"string"==typeof b&&(b=w.createHTML(""));jt&&jt(e),Ee=e}},ke=dn({},["mi","mo","mn","ms","mtext"]),Ce=dn({},["foreignobject","annotation-xml"]),Oe=dn({},["title","style","font","a","script"]),Re=dn({},[...yn,...gn,..._n]),Me=dn({},[...vn,...wn]),Fe=function(e){let t=v(e);t&&t.tagName||(t={namespaceURI:ge,tagName:"template"});const n=Qt(e.tagName),r=Qt(t.tagName);return!!ve[e.namespaceURI]&&(e.namespaceURI===he?t.namespaceURI===ye?"svg"===n:t.namespaceURI===me?"svg"===n&&("annotation-xml"===r||ke[r]):Boolean(Re[n]):e.namespaceURI===me?t.namespaceURI===ye?"math"===n:t.namespaceURI===he?"math"===n&&Ce[r]:Boolean(Me[n]):e.namespaceURI===ye?!(t.namespaceURI===he&&!Ce[r])&&(!(t.namespaceURI===me&&!ke[r])&&(!Me[n]&&(Oe[n]||!Re[n]))):!("application/xhtml+xml"!==be||!ve[e.namespaceURI]))},Ie=function(e){Zt(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},Ue=function(e,t){try{Zt(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){Zt(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!P[e])if(Q||ee)try{Ie(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},He=function(e){let t=null,n=null;if(Z)e="<remove></remove>"+e;else{const t=tn(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===be&&ge===ye&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=w?w.createHTML(e):e;if(ge===ye)try{t=(new p).parseFromString(i,be)}catch(e){}if(!t||!t.documentElement){t=A.createDocument(ge,"template",null);try{t.documentElement.innerHTML=_e?b:i}catch(e){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),ge===ye?E.call(t,K?"html":"body")[0]:K?t.documentElement:o},Pe=function(e){return T.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},ze=function(e){return e instanceof f&&(void 0!==e.__depth&&"number"!=typeof e.__depth||void 0!==e.__removalCount&&"number"!=typeof e.__removalCount||"string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},qe=function(e){return"function"==typeof l&&e instanceof l},Be=function(e,t,r){N[e]&&Kt(N[e],(e=>{e.call(n,t,r,Ee)}))},We=function(e){let t=null;if(Be("beforeSanitizeElements",e,null),ze(e))return Ie(e),!0;const r=Se(e.nodeName);if(Be("uponSanitizeElement",e,{tagName:r,allowedTags:U}),e.hasChildNodes()&&!qe(e.firstElementChild)&&sn(/<[/\w]/g,e.innerHTML)&&sn(/<[/\w]/g,e.textContent))return Ie(e),!0;if(e.nodeType===Pn)return Ie(e),!0;if($&&e.nodeType===zn&&sn(/<[/\w]/g,e.data))return Ie(e),!0;if(!U[r]||B[r]){if(!B[r]&&je(r)){if(q.tagNameCheck instanceof RegExp&&sn(q.tagNameCheck,r))return!1;if(q.tagNameCheck instanceof Function&&q.tagNameCheck(r))return!1}if(oe&&!le[r]){const t=v(e)||e.parentNode,n=_(e)||e.childNodes;if(n&&t){for(let r=n.length-1;r>=0;--r){const i=y(n[r],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,g(e))}}}return Ie(e),!0}return e instanceof u&&!Fe(e)?(Ie(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!sn(/<\/no(script|embed|frames)/i,e.innerHTML)?(X&&e.nodeType===Hn&&(t=e.textContent,Kt([L,D,k],(e=>{t=nn(t,e," ")})),e.textContent!==t&&(Zt(n.removed,{element:e.cloneNode()}),e.textContent=t)),Be("afterSanitizeElements",e,null),!1):(Ie(e),!0)},Ge=function(e,t,n){if(ne&&("id"===t||"name"===t)&&(n in r||n in Ne||"__depth"===n||"__removalCount"===n))return!1;if(j&&!W[t]&&sn(C,t));else if(G&&sn(O,t));else if(!P[t]||W[t]){if(!(je(e)&&(q.tagNameCheck instanceof RegExp&&sn(q.tagNameCheck,e)||q.tagNameCheck instanceof Function&&q.tagNameCheck(e))&&(q.attributeNameCheck instanceof RegExp&&sn(q.attributeNameCheck,t)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(t))||"is"===t&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&sn(q.tagNameCheck,n)||q.tagNameCheck instanceof Function&&q.tagNameCheck(n))))return!1}else if(fe[t]);else if(sn(I,nn(n,M,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==rn(n,"data:")||!ce[e]){if(Y&&!sn(R,nn(n,M,"")));else if(n)return!1}else;return!0},je=function(e){return"annotation-xml"!==e&&tn(e,F)},Ye=function(e){Be("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:P};let i=t.length;for(;i--;){const o=t[i],{name:a,namespaceURI:s,value:l}=o,u=Se(a);let c="value"===a?l:on(l);if(r.attrName=u,r.attrValue=c,r.keepAttr=!0,r.forceKeepAttr=void 0,Be("uponSanitizeAttribute",e,r),c=r.attrValue,r.forceKeepAttr)continue;if(Ue(a,e),!r.keepAttr)continue;if(!V&&sn(/\/>/i,c)){Ue(a,e);continue}if($&&sn(/((--!?|])>)|<\/(style|title)/i,c)){Ue(a,e);continue}X&&Kt([L,D,k],(e=>{c=nn(c,e," ")}));const d=Se(e.nodeName);if(Ge(d,u,c)){if(!re||"id"!==u&&"name"!==u||(Ue(a,e),c=ie+c),w&&"object"==typeof m&&"function"==typeof m.getAttributeType)if(s);else switch(m.getAttributeType(d,u)){case"TrustedHTML":c=w.createHTML(c);break;case"TrustedScriptURL":c=w.createScriptURL(c)}try{s?e.setAttributeNS(s,a,c):e.setAttribute(a,c),ze(e)?Ie(e):Jt(n.removed)}catch(e){}}}Be("afterSanitizeAttributes",e,null)},Ve=function e(t){let n=null;const r=Pe(t);for(Be("beforeSanitizeShadowDOM",t,null);n=r.nextNode();){if(Be("uponSanitizeShadowNode",n,null),We(n))continue;const t=v(n);n.nodeType===Un&&(t&&t.__depth?n.__depth=(n.__removalCount||0)+t.__depth+1:n.__depth=1),(n.__depth>=xe||n.__depth<0||un(n.__depth))&&Ie(n),n.content instanceof a&&(n.content.__depth=n.__depth,e(n.content)),Ye(n)}Be("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,o=null,s=null,u=null;if(_e=!e,_e&&(e="\x3c!--\x3e"),"string"!=typeof e&&!qe(e)){if("function"!=typeof e.toString)throw ln("toString is not a function");if("string"!=typeof(e=e.toString()))throw ln("dirty is not a string, aborting")}if(!n.isSupported)return e;if(J||De(t),n.removed=[],"string"==typeof e&&(ae=!1),ae){if(e.nodeName){const t=Se(e.nodeName);if(!U[t]||B[t])throw ln("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)r=He("\x3c!----\x3e"),o=r.ownerDocument.importNode(e,!0),o.nodeType===Un&&"BODY"===o.nodeName||"HTML"===o.nodeName?r=o:r.appendChild(o);else{if(!Q&&!X&&!K&&-1===e.indexOf("<"))return w&&te?w.createHTML(e):e;if(r=He(e),!r)return Q?null:te?b:""}r&&Z&&Ie(r.firstChild);const c=Pe(ae?e:r);for(;s=c.nextNode();){if(We(s))continue;const e=v(s);s.nodeType===Un&&(e&&e.__depth?s.__depth=(s.__removalCount||0)+e.__depth+1:s.__depth=1),(s.__depth>=xe||s.__depth<0||un(s.__depth))&&Ie(s),s.content instanceof a&&(s.content.__depth=s.__depth,Ve(s.content)),Ye(s)}if(ae)return e;if(Q){if(ee)for(u=S.call(r.ownerDocument);r.firstChild;)u.appendChild(r.firstChild);else u=r;return(P.shadowroot||P.shadowrootmode)&&(u=x.call(i,u,!0)),u}let d=K?r.outerHTML:r.innerHTML;return K&&U["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&sn(Mn,r.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+d),X&&Kt([L,D,k],(e=>{d=nn(d,e," ")})),w&&te?w.createHTML(d):d},n.setConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};De(e),J=!0},n.clearConfig=function(){Ee=null,J=!1},n.isValidAttribute=function(e,t,n){Ee||De({});const r=Se(e),i=Se(t);return Ge(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&(N[e]=N[e]||[],Zt(N[e],t))},n.removeHook=function(e){if(N[e])return Jt(N[e])},n.removeHooks=function(e){N[e]&&(N[e]=[])},n.removeAllHooks=function(){N={}},n}();function er(){if(null==Gn){var e=function(){var e=window.location;"about:srcdoc"==e.href&&(e=window.parent.location);var t={};return function(e,n,r){for(;r=n.exec(e);)t[decodeURIComponent(r[1])]=decodeURIComponent(r[2])}(e.search.substring(1).replace(/\+/g,"%20"),/([^&=]+)=?([^&]*)/g),t}();Gn="referrer"in e?/^https:\/\/medium.com\//.test(e.referrer):!("auto"in e)}return Gn}function tr(e){var t=e||window.innerWidth;return t>999?650:t>599?575:400}function nr(e){if(e&&window.top!==window.self){var t=window;"srcdoc"==t.location.pathname&&(t=t.parent);var n={sender:"Flourish",method:"scrolly",captions:e.captions};t.parent.postMessage(JSON.stringify(n),"*")}}function rr(e,t){if(window.top!==window.self){var n=window;if("srcdoc"==n.location.pathname&&(n=n.parent),jn)return e=parseInt(e,10),void n.parent.postMessage({sentinel:"amp",type:"embed-size",height:e},"*");var r={sender:"Flourish",context:"iframe.resize",method:"resize",height:e,src:n.location.toString()};if(t)for(var i in t)r[i]=t[i];n.parent.postMessage(JSON.stringify(r),"*")}}function ir(){return(-1!==navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("iPhone"))&&-1==navigator.userAgent.indexOf("Chrome")}function or(e){return"string"==typeof e||e instanceof String}function ar(e){return"warn"!==e.method?(console.warn("BUG: validateWarnMessage called for method"+e.method),!1):!(null!=e.message&&!or(e.message))&&!(null!=e.explanation&&!or(e.explanation))}function sr(e){return"resize"!==e.method?(console.warn("BUG: validateResizeMessage called for method"+e.method),!1):!!or(e.src)&&(!!or(e.context)&&!!("number"==typeof(t=e.height)?!isNaN(t)&&t>=0:or(t)&&/\d/.test(t)&&/^[0-9]*(\.[0-9]*)?(cm|mm|Q|in|pc|pt|px|em|ex|ch|rem|lh|vw|vh|vmin|vmax|%)?$/i.test(t)));var t}function lr(e){throw new Error("Validation for setSetting is not implemented yet; see issue #4328")}function ur(e){return"scrolly"!==e.method?(console.warn("BUG: validateScrolly called for method"+e.method),!1):!!Array.isArray(e.captions)}function cr(e){return"customerAnalytics"===e.method||(console.warn("BUG: validateCustomerAnalyticsMessage called for method"+e.method),!1)}function dr(e){return"request-upload"!==e.method?(console.warn("BUG: validateResizeMessage called for method"+e.method),!1):!!or(e.name)&&!(null!=e.accept&&!or(e.accept))}function fr(e,t,n){var r=function(e){for(var t={warn:ar,resize:sr,setSetting:lr,customerAnalytics:cr,"request-upload":dr,scrolly:ur},n={},r=0;r<e.length;r++){var i=e[r];if(!t[i])throw new Error("No validator found for method "+i);n[i]=t[i]}return n}(t);window.addEventListener("message",(function(t){var i=function(){if(t.origin==document.location.origin)return!0;if(n){const e=t.origin.toLowerCase();if(n=n.toLowerCase(),e.endsWith("//"+n))return!0;if(e.endsWith("."+n))return!0}return!!t.origin.match(/\/\/localhost:\d+$|\/\/(?:public|app)\.flourish.devlocal$|\/\/flourish-api\.com$|\.flourish\.(?:local(:\d+)?|net|rocks|studio)$|\.uri\.sh$|\/\/flourish-user-templates\.com$/)}();if(null!=t.source&&i){var o;try{o="object"==typeof t.data?t.data:JSON.parse(t.data)}catch(e){return void console.warn("Unexpected non-JSON message: "+JSON.stringify(t.data))}if("Flourish"===o.sender)if(o.method)if(Object.prototype.hasOwnProperty.call(r,o.method))if(r[o.method](o)){for(var a=document.querySelectorAll("iframe"),s=0;s<a.length;s++)if(a[s].contentWindow==t.source||a[s].contentWindow==t.source.parent)return void e(o,a[s]);console.warn("could not find frame",o)}else console.warn("Validation failed for the message",o);else console.warn("No validator implemented for message",o);else console.warn("The 'method' property was missing from message",o)}})),ir()&&(window.addEventListener("resize",pr),pr())}function pr(){for(var e=document.querySelectorAll(".flourish-embed"),t=0;t<e.length;t++){var n=e[t];if(!n.getAttribute("data-width")){var r=n.querySelector("iframe");if(r){var i=window.getComputedStyle(n),o=n.offsetWidth-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight);r.style.width=o+"px"}}}}function mr(e,t){var n=e.parentNode;if(n.classList.contains("fl-scrolly-wrapper"))console.warn("createScrolly is being called more than once per story. This should not happen.");else{n.classList.add("fl-scrolly-wrapper"),n.style.position="relative",n.style.paddingBottom="1px",n.style.transform="translate3d(0, 0, 0)",e.style.position="sticky";var r=n.getAttribute("data-height")||null;r||(r="80vh",e.style.height=r),e.style.top="calc(50vh - "+r+"/2)";var i=n.querySelector(".flourish-credit");i&&(i.style.position="sticky",i.style.top="calc(50vh + "+r+"/2)"),t.forEach((function(e,t){var r="string"==typeof e&&""!=e.trim(),i=document.createElement("div");i.setAttribute("data-slide",t),i.classList.add("fl-scrolly-caption"),i.style.position="relative",i.style.transform="translate3d(0,0,0)",i.style.textAlign="center",i.style.maxWidth="500px",i.style.height="auto",i.style.marginTop="0",i.style.marginBottom=r?"100vh":"50vh",i.style.marginLeft="auto",i.style.marginRight="auto";var o=document.createElement("div");o.innerHTML=Qn.sanitize(e),o.style.visibility=r?"":"hidden",o.style.display="inline-block",o.style.paddingTop="1.25em",o.style.paddingRight="1.25em",o.style.paddingBottom="1.25em",o.style.paddingLeft="1.25em",o.style.background="rgba(255,255,255,0.9)",o.style.boxShadow="0px 0px 10px rgba(0,0,0,0.2)",o.style.borderRadius="10px",o.style.textAlign="center",o.style.maxWidth="100%",o.style.margin="0 20px",o.style.overflowX="hidden",i.appendChild(o),n.appendChild(i)})),function(e){for(var t=new IntersectionObserver((function(t){t.forEach((function(t){if(t.isIntersecting){var n=e.querySelector("iframe");n&&(n.src=n.src.replace(/#slide-.*/,"")+"#slide-"+t.target.getAttribute("data-slide"))}}))}),{rootMargin:"0px 0px -0% 0px"}),n=e.querySelectorAll(".fl-scrolly-caption"),r=0;r<n.length;r++)t.observe(n[r]);e.querySelectorAll(".fl-scrolly-caption img").forEach((function(e){e.style.maxWidth="100%"}))}(n)}}function hr(e,t,n,r,i){var o=document.createElement("iframe");if(o.setAttribute("scrolling","no"),o.setAttribute("frameborder","0"),o.setAttribute("title","Interactive or visual content"),o.setAttribute("sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"),t.appendChild(o),o.offsetParent||"fixed"===getComputedStyle(o).position)yr(e,t,o,n,r,i);else{var a={embed_url:e,container:t,iframe:o,width:n,height:r,play_on_load:i};if(window._flourish_poll_items?window._flourish_poll_items.push(a):window._flourish_poll_items=[a],window._flourish_poll_items.length>1)return o;var s=setInterval((function(){window._flourish_poll_items=window._flourish_poll_items.filter((function(e){return!e.iframe.offsetParent||(yr(e.embed_url,e.container,e.iframe,e.width,e.height,e.play_on_load),!1)})),window._flourish_poll_items.length||clearInterval(s)}),500)}return o}function yr(e,t,n,r,i,o){var a;return r&&"number"==typeof r?(a=r,r+="px"):r&&r.match(/^[ \t\r\n\f]*([+-]?\d+|\d*\.\d+(?:[eE][+-]?\d+)?)(?:\\?[Pp]|\\0{0,4}[57]0(?:\r\n|[ \t\r\n\f])?)(?:\\?[Xx]|\\0{0,4}[57]8(?:\r\n|[ \t\r\n\f])?)[ \t\r\n\f]*$/)&&(a=parseFloat(r)),i&&"number"==typeof i&&(i+="px"),r?n.style.width=r:ir()?n.style.width=t.offsetWidth+"px":n.style.width="100%",!!i||(e.match(/\?/)?e+="&auto=1":e+="?auto=1",i=tr(a||n.offsetWidth)+"px"),i&&("%"===i.charAt(i.length-1)&&(i=parseFloat(i)/100*t.parentNode.offsetHeight+"px"),n.style.height=i),n.setAttribute("src",e+(o?"#play-on-load":"")),n}function gr(){return jn="#amp=1"==window.location.hash,{createEmbedIframe:hr,isFixedHeight:er,getHeightForBreakpoint:tr,startEventListeners:fr,notifyParentWindow:rr,initScrolly:nr,createScrolly:mr,isSafari:ir,initCustomerAnalytics:Pt,addAnalyticsListener:Ht,sendCustomerAnalyticsMessage:Ut}}function _r(e){var t={};for(var n in e){for(var r=t,i=n.indexOf("."),o=0;i>=0;i=n.indexOf(".",o=i+1)){var a=n.substring(o,i);a in r||(r[a]={}),r=r[a]}r[n.substring(o)]=e[n]}return t}function vr(e){if(null==e)return e;var t,n={};for(var r in e)Array.isArray(e[r])?n[r]=e[r].slice():(t=e[r],Array.isArray(t)||"object"!=typeof t||null==t?n[r]=e[r]:n[r]=vr(e[r]));return n}var wr,br=null;function Ar(){return"MessageChannel"in window}var Tr=null;function Sr(){Tr&&Yn.removeEventListener("load",Tr),Tr=null}function Er(e){Sr(),Yn.addEventListener("load",e),Tr=e}function xr(e,t,n){return Yr(!1),Zn=e?e.visualisation?e.visualisation:e.current_slide.visualisation:null,br=null,Zn&&Zn.template_id?(Er(function(e,t,n){var r=e.visualisation?e.visualisation.template_id:e.current_slide.visualisation.template_id,i=e.current_slide?e.current_slide.id:null;return function(){!Zn||Zn.template_id!=r||e.current_slide&&e.current_slide.id!==i||(Sr(),Mr((function(o,a){o?console.error("Failed to get default state"):!Zn||Zn.template_id!=r||e.current_slide&&e.current_slide.id!==i||Fr((function(o,s){if(o)console.error("Failed to call hasData");else if(Zn&&Zn.template_id==r&&(!e.current_slide||e.current_slide.id===i)){var l=!1;e.visualisation&&(l=e.data_bindings.requiredBindingsAreUnset()),s?Zn.refreshDataBindings((function(o){o?console.error("Failed to refresh data bindings"):!Zn||Zn.template_id!=r||e.current_slide&&e.current_slide.id!==i||Zn.prepareData((function(o,s){o?console.error("Failed to prepare data for template"):!Zn||Zn.template_id!=r||e.current_slide&&e.current_slide.id!==i||Gr({data:s,state:t,draw:!l},(function(e,t){br=a,n(e,t)}))}))})):Gr({state:t,draw:!l},(function(e,t){br=a,n(e,t)}))}}))})))}}(e,t,n)),Yn.src="/template/"+Zn.template_id+"/embed/?auto=1&environment="+Vn+"&is_read_only="+(e.is_read_only?"1":"0"),Yn):(Sr(),Yn.src="about:blank",Yn)}function Nr(e){Mr((function(t,n){t?console.error("Failed to get default state"):(br=n,e())}))}function Lr(e,t){var n=e.template_id;e.refreshDataBindings((function(r){r?console.error("Failed to fetch data bindings"):e.prepareData((function(e,r){if(Zn&&Zn.template_id==n)return e?(console.error("Failed to prepare data for template"),void t(e)):void t(void 0,r)}))}))}function Dr(e,t){Lr(e,(function(e,n){if(e)return t(e);Gr({data:n,update:!0},t)}))}function kr(e,t){Lr(e,(function(e,n){if(e)return t(e);Gr({data:n,update:!1},t)}))}function Cr(e,t,n){Lr(e,(function(e,r){if(e)return n(e);Gr({data:r,state:t,overwrite_state:!0,update:!0},n)}))}function Or(e,t,n,r=Yn){if(Ar()){var i=new MessageChannel;i.port1.onmessage=function(e){var t=e.data;if("string"==typeof t){if(!n)return;return n(void 0,JSON.parse(t))}if("object"==typeof t){if("result"in t){if(!n)return;return n(void 0,t.result)}if("error"in t){if(!n)return;return n(t.error)}console.error("Unrecognised response to message",t)}else console.error("Unrecognised response to message",t)},r.contentWindow.postMessage({sender:"Flourish",method:e,argument:t},"*",[i.port2])}}function Rr(e,t){Or("setState",_r(e),t)}function Mr(e,t){"function"!=typeof e?Or("getState",e,t):Or("getState",void 0,e)}function Fr(e){Or("hasData",void 0,e)}function Ir(e,t){Or("setData",e,t)}function Ur(e){Or("getData",void 0,e)}function Hr(e){Or("draw",void 0,e),Yr(!0)}function Pr(e){Kn&&Kn.clear(),jr()&&Or("update",void 0,e)}function zr(e,t,n){Or("snapshot",e,t,n)}function qr(){return vr(br)}function Br(e,t){Or("setFixedHeight",e,t)}function Wr(e){if(Yn.parentNode.offsetWidth){if(void 0!==e)wr=null!=e;else if(wr)return;var t=e||$n&&$n.responsive_menu&&$n.responsive_menu.getHeightSetting()||Xn.getHeightForBreakpoint(Yn.offsetWidth),n=typeof t;("number"===n||"string"===n&&!isNaN(t))&&(t+="px"),Yn.style.height=t}}function Gr(e,t,n=Yn){jr()?delete e.draw:e.draw&&Yr(!0),e.state&&(e.state=_r(e.state)),Kn&&Kn.clear(),Or("sync",e,(function(n,r){null!=n||"success"!==r?(e.draw&&Yr(!1),function n(r){r?t&&t(r):function(e,t){return e.data?(Ir(e.data,t),delete e.data,!1):e.state?(Rr(e.state,t),delete e.state,!1):e.draw?(Hr(t),delete e.draw,!1):!e.update||(Pr(t),delete e.update,!1)}(e,n)&&t&&t(void 0)}(n)):t&&t(void 0)}),n)}function jr(){return Jn}function Yr(e){Jn=e}function Vr(e,t,n,r,i){return Yn=document.querySelector(e),Vn=t,$n=n,Kn=r,i||(i={}),Xn=gr(),Yn.style.height=Xn.getHeightForBreakpoint(Yn.offsetWidth)+"px",Xn.startEventListeners((function(e){"resize"==e.method?Wr(e.height):"warn"==e.method?(Kn&&Kn.warn(e),console.warn("Warning from template:",e.message,e.explanation)):e.method in i&&i[e.method](e)}),["resize","warn","customerAnalytics","setSetting","request-upload"]),Ar()||function(e){if(e){var t=document.createElement("div");t.className="unsupported-notice",t.innerHTML="<h3>Please update your browser</h3><p>This page only works with newer versions of your browser.</p>",e.appendChild(t)}}(Yn.parentNode),{loadVisualisation:xr,updateData:Dr,updateDataAndState:Cr,updateDataNotPreview:kr,setState:Rr,getState:Mr,getDefaultState:qr,hasData:Fr,setData:Ir,getData:Ur,draw:Hr,update:Pr,snapshot:zr,setFixedHeight:Br,resize:Wr,sync:Gr,getDrawCalled:jr,setDrawCalled:Yr,setFrameLoadListener:Er,updateDefaultState:Nr}}var Xr,$r,Kr;function Jr(e,t){for(var n in t)"object"!=typeof e[n]||null==e[n]||Array.isArray(e[n])||"object"!=typeof t[n]||null==t[n]||Array.isArray(t[n])?e[n]=t[n]:Jr(e[n],t[n])}function Zr(e,t,n,r,i,o,a){var s=this;s.story=e,s.visualisations=t,s.data=n,s.frame=document.querySelector("#story iframe"),s.template_paths=r||{},s.enable_customer_analytics=a,s.auto_resize="scrolly"!=s.story.presentation_mode&&!$r.isFixedHeight(),s.state="INIT",o?s.analytics=window.gtag=he:(s.analytics=ye(e.id,i),s.analytics("event","story",{play:e.id}));var l,u,c=window.location.hash,d=(c&&c.match(/^#play-on-load/)||s.story.is_timed&&s.story.plays_on_load)&&"scrolly"!=s.story.presentation_mode;if(e.slides.length>0){for(var f=0;f<e.slides.length;f++){var p=e.slides[f];p.visualisation_id&&(p.visualisation=t[p.visualisation_id])}c&&"#amp=1"!=c&&!d||(window.location.hash="#slide-0"),s.loadSlideFromHash()}function m(){s.previous()}function h(){s.next()}!function(e,t){Dt=e,kt=t}(m,h),window.addEventListener("keydown",Rt),window.addEventListener("keyup",Mt),s.auto_resize?(l=document.querySelector("iframe"),u=l.offsetHeight,$r.startEventListeners((function(e){"resize"===e.method&&e.height!==u&&("number"!=typeof(u=e.height)&&(u=parseInt(u,10)),l.style.height=u+"px",ri(l.offsetHeight+ii()))}),["resize"])):s.updateHeight(),s.auto_resize||window.addEventListener("resize",(function(){s.updateHeight()}));var y=!0;ge=s,Se=d,ve=function(e){return window.location.hash="#slide-"+e,!0},Oe(),Re(),Kr={update:Oe,play:Le,pause:De,playPause:Ne,updateTimecodes:Re,jumpToSlide:Me};var g=document.querySelector(".first");g&&g.addEventListener("click",(function(){s.first()}));var _=document.querySelector(".previous");_&&_.addEventListener("click",m);var v=document.querySelectorAll(".play-pause");for(f=0;f<v.length;f++)v[f].addEventListener("click",(function(e){y&&(y=!1,Kr.jumpToSlide(s.current_slide.index)),Kr.playPause(),$r.sendCustomerAnalyticsMessage({action:e.target.classList.contains("playing")?"play":"pause"})}));var w=document.querySelector(".next");w&&w.addEventListener("click",h);var b=document.querySelector(".last");b&&b.addEventListener("click",(function(){s.last()})),d&&function(){if(!Kr)return;var e=document.querySelector(".play-pause.large");e&&e.parentNode&&e.parentNode.removeChild(e);document.querySelector("iframe").addEventListener("load",(function(){Kr.play()}),!0)}()}Zr.prototype.dispatchEvent=function(e,t){switch(e){case"slideChange":this.eventSlideChange(t);break;case"templateLoaded":this.eventTemplateLoaded(t);break;case"defaultStateFetched":this.eventDefaultStateFetched(t);break;case"syncDone":this.eventSyncDone(t);break;case"fadedOut":this.eventFadedOut(t);break;default:throw new Error("Unrecognised event: "+e)}},Zr.prototype.eventSlideChange=function(e){var t=this,n=e.slide_index;n<0&&(n=0),n>=t.story.slides.length&&(n=t.story.slides.length-1);var r=t.current_slide,i=t.template_id;t.current_slide=t.story.slides[n];var o=t.current_slide.visualisation;switch(t.template_id=o&&o.template_id,t.state){case"LOADING_TEMPLATE":case"FETCHING_DEFAULT_STATE":if(t.template_id==i)break;case"INIT":case"EMPTY_SLIDE":if(!t.template_id){t.state="EMPTY_SLIDE",t.frame.src="about:blank",Ft(t.current_slide.caption_text);break}t.state="LOADING_TEMPLATE",t.loadTemplate();break;case"EMPTY_STORY":throw new Error("We cannot change slide in an empty story");case"FADING_OUT":break;case"SYNCING_SLIDE":case"READY":if(t.current_slide==r)return;if(t.template_id!=i){t.state="FADING_OUT",t.fadeFrameOut();break}t.state="SYNCING_SLIDE";var a=r.visualisation!==t.current_slide.visualisation;t.drawOrUpdateSlide("update",a,n);break;default:throw new Error("Unknown state: "+this.state)}t.updateControls(),t.updateSlideCount(),this.analytics("event","story",{load_slide:n}),$r.sendCustomerAnalyticsMessage({action:"change_slide",slide_index:n+1})},Zr.prototype.eventTemplateLoaded=function(e){var t=this,n=e.template_id;"LOADING_TEMPLATE"==t.state&&t.template_id==n&&(t.state="FETCHING_DEFAULT_STATE",t.fadeFrameIn(),Xr.updateDefaultState((function(){t.dispatchEvent("defaultStateFetched",{template_id:n})})))},Zr.prototype.eventDefaultStateFetched=function(e){var t=this,n=e.template_id;"FETCHING_DEFAULT_STATE"==t.state&&t.template_id==n&&(t.state="SYNCING_SLIDE",t.drawOrUpdateSlide("draw",!0,t.current_slide.index))},Zr.prototype.eventSyncDone=function(e){var t=this,n=e.slide_index;"SYNCING_SLIDE"==t.state&&t.current_slide.index==n&&(t.state="READY")},Zr.prototype.eventFadedOut=function(){var e=this;if("FADING_OUT"==e.state){if(!e.template_id)return e.state="EMPTY_SLIDE",e.frame.src="about:blank",void Ft(e.current_slide.caption_text);e.state="LOADING_TEMPLATE",e.loadTemplate()}},Zr.prototype.loadTemplate=function(){var e=this,t=e.template_id;Xr.setDrawCalled(!1);var n=e.template_paths[t]||"/template/"+t+"/embed";n+="?environment=story_player",e.auto_resize&&(n+="&auto=1"),e.enable_customer_analytics&&(n+="&enable_customer_analytics=1"),Xr.setFrameLoadListener((function(){e.dispatchEvent("templateLoaded",{template_id:t})})),e.frame.src=n},Zr.prototype.drawOrUpdateSlide=function(e,t,n){var r=this;Ft(r.current_slide.caption_text),r.populateStateAndData(e,t,(function(){r.dispatchEvent("syncDone",{slide_index:n})})),r.updateHeight()},Zr.prototype.noSlidesBefore=function(){return!this.current_slide||this.current_slide.index<1},Zr.prototype.noSlidesAfter=function(){return!this.current_slide||this.current_slide.index==this.story.slides.length-1},Zr.prototype.previous=function(){if(!this.noSlidesBefore()){this.analytics("event","story",{previous:this.current_slide.index});var e=this.current_slide.index-1;window.location.hash="#slide-"+e}},Zr.prototype.next=function(){if(!this.noSlidesAfter()){this.analytics("event","story",{next:this.current_slide.index});var e=this.current_slide.index+1;window.location.hash="#slide-"+e}},Zr.prototype.first=function(){this.noSlidesBefore()||(this.analytics("event","story",{first:this.current_slide.index}),window.location.hash="#slide-0")},Zr.prototype.last=function(){this.noSlidesAfter()||(this.analytics("event","story",{last:this.current_slide.index}),window.location.hash="#slide-"+(this.story.slides.length-1))},Zr.prototype.populateStateAndData=function(e,t,n){var r=this.current_slide,i=r.visualisation,o={};Jr(o,Xr.getDefaultState()),Jr(o,_r(i.settingsForCurrentTemplate())),Jr(o,r.state);var a={state:o,overwrite_state:!0};t&&(a.data=this.data[i.id]),a[e]=!0,Xr.sync(a,n)};var Qr=null;function ei(){Qr&&(cancelAnimationFrame(Qr),Qr=null)}Zr.prototype.fadeFrameOut=function(){var e=this;ei();var t=null,n=function(r){null==t&&(t=r);var i=r-t,o=Math.min(1,Math.max(0,i/250));e.frame.style.opacity=1-o,1==o?(Qr=null,e.dispatchEvent("fadedOut",{})):Qr=requestAnimationFrame(n)};Qr=requestAnimationFrame(n)},Zr.prototype.fadeFrameIn=function(){var e=this;ei();var t=null,n=function(r){null==t&&(t=r);var i=r-t,o=Math.min(1,Math.max(0,i/250));e.frame.style.opacity=o,Qr=1==o?null:requestAnimationFrame(n)};Qr=requestAnimationFrame(n)};var ti=null;function ni(){ti||(ti={furniture:document.querySelector(".story-furniture"),progress:document.querySelector(".progress span, .progress-indicator .progress"),previous:document.querySelector(".previous"),next:document.querySelector(".next"),first:document.querySelector(".first"),last:document.querySelector(".last"),count_current:document.querySelector(".count .current, .count-current"),count_total:document.querySelector(".count .total, .count-total")})}function ri(e){e&&$r.notifyParentWindow(e,{player:!0})}function ii(){var e=0,t=document.querySelector(".story-furniture");return t&&"absolute"!==getComputedStyle(t).position&&(e=t.offsetHeight),e}return Zr.prototype.updateControls=function(){var e,t=this,n=t.current_slide;e=t.story.slides.length<2?0:n.index/(t.story.slides.length-1),ni(),ti.progress&&(ti.progress.style.width=100*e+"%"),document.querySelector("nav")?(t.noSlidesBefore()?(ti.previous.setAttribute("disabled",""),ti.first.setAttribute("disabled","")):(ti.previous.removeAttribute("disabled"),ti.first.removeAttribute("disabled")),t.noSlidesAfter()?(ti.next.setAttribute("disabled",""),ti.last.setAttribute("disabled","")):(ti.next.removeAttribute("disabled"),ti.last.removeAttribute("disabled"))):(t.noSlidesBefore()?(ti.previous&&ti.previous.classList.add("disabled"),ti.first&&ti.first.classList.add("disabled")):(ti.previous&&ti.previous.classList.remove("disabled"),ti.first&&ti.first.classList.remove("disabled")),t.noSlidesAfter()?(ti.next&&ti.next.classList.add("disabled"),ti.last&&ti.last.classList.add("disabled")):(ti.next&&ti.next.classList.remove("disabled"),ti.last&&ti.last.classList.remove("disabled"))),ti.furniture&&(null!=n&&n.caption_text?ti.furniture.classList.add("has-caption"):ti.furniture.classList.remove("has-caption"))},Zr.prototype.updateSlideCount=function(){ni(),ti.count_current&&(ti.count_current.innerHTML=this.current_slide.index+1),ti.count_total&&(ti.count_total.innerHTML=this.story.slides.length)},Zr.prototype.loadSlideFromHash=function(){var e=window.location.hash;if(e&&e.match(/^#slide-/)){var t=parseInt(e.substr("#slide-".length));this.dispatchEvent("slideChange",{slide_index:t})}},Zr.prototype.updateHeight=function(){var e=document.querySelector("iframe");if(this.auto_resize){ri(e.offsetHeight+ii())}else{var t=document.body.offsetHeight-ii();t!==e.offsetHeight&&(e.style.height=t+"px")}},e.Slide=function(e,n,r){this.story=e,t(this,n,void 0,r)},e.Story=function(e,n,r,i,o){t(this,e,n,r),this.slides=i,this.slides_by_id={};for(var a=0;a<i.length;a++){var s=i[a];s.story=this,this.slides_by_id[s.id]=s}this.status=o},e.Visualisation=r,e.initStoryPlayer=function(e,t,n,r,i,o,a){Xr=Vr("#story iframe","story_player",void 0,void 0,{customerAnalytics:function(e){"mouse_enter"!==e.action&&"mouse_leave"!==e.action&&$r.sendCustomerAnalyticsMessage(e)}}),$r=gr(),a&&$r.initCustomerAnalytics(),window.Flourish=window.Flourish||{};var s=window.Flourish.app=new Zr(t,n,r,i,e,o,a);if(window.addEventListener("hashchange",(function(){s.loadSlideFromHash()})),"scrolly"==t.presentation_mode){const e=t.slides.map((function(e){var t=e.caption_text?e.caption_text.replace(/<p>/g,'<p style="margin: 0">'):"";return Ct.sanitize(t)}));$r.initScrolly({captions:e})}},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
