import { withRouter } from 'react-router-dom';
import { withState } from 'recompose';
import { connect } from 'react-redux';
import Component from './country-climate-vulnerability-component';
import { getSectionData } from './country-climate-vulnerability-selectors';

const mapStateToProps = (state, { match }) => {
  const iso = match.params.iso;
  const { adaptations } = state;
  const climateVulnerability = {
    iso,
    adaptations
  };

  return {
    sectionData: getSectionData(climateVulnerability),
    ready: adaptations.loaded
  };
};

const withInfoButton = withState('infoOpen', 'toggleInfo', false);

export default withRouter(
  withInfoButton(connect(mapStateToProps, null)(Component))
);
