import { withRouter } from 'react-router-dom';
import { connect } from 'react-redux';
import Component from './country-climate-vulnerability-component';
import actions from './country-climate-vulnerability-actions';
import { getSectionData } from './country-climate-vulnerability-selectors';

export { initialState } from './country-climate-vulnerability-reducers';
export { default as reducers } from './country-climate-vulnerability-reducers';
export { default as actions } from './country-climate-vulnerability-actions';

const mapStateToProps = (state, { match }) => {
  const iso = match.params.iso;
  const { countryClimateVulnerability, adaptations } = state;
  const climateVulnerability = {
    iso,
    countryClimateVulnerability,
    adaptations
  };

  return {
    toogleInfo: countryClimateVulnerability.toogleInfo,
    infoOpen: countryClimateVulnerability.infoOpen,
    sectionData: getSectionData(climateVulnerability),
    ready: adaptations.loaded
  };
};

export default withRouter(connect(mapStateToProps, actions)(Component));
