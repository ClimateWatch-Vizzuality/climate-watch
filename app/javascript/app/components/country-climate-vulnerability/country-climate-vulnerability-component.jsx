import React, { PureComponent } from 'react';
import Proptypes from 'prop-types';
import cx from 'classnames';

import PrepLink from 'components/prep-link';
import Button from 'components/button';
import Card from 'components/card';
import Icon from 'components/icon';
import VulnerabilityGraph from 'components/vulnerability-graph';
import infoIcon from 'assets/icons/info.svg';
import AdaptationsProvider from 'providers/adaptations-provider';
import Loading from 'components/loading';

import layout from 'styles/layout.scss';
import btnInfoTheme from 'styles/themes/button/button-info.scss';
import styles from './country-climate-vulnerability-styles.scss';
// import styles from './climate-vulnerability-styles.scss';

class CountryClimateVulnerability extends PureComponent {
  // eslint-disable-line react/prefer-stateless-function
  render() {
    const { infoOpen, toogleInfo, sectionData } = this.props;
    return (
      <div className={styles.wrapper}>
        <div className={layout.content}>
          <div className={styles.header}>
            <div className={styles.titleContainer}>
              <AdaptationsProvider />
              <h3 className={styles.title}>
                Country vulnerability and readiness
              </h3>
              <Button
                className={cx(btnInfoTheme.btnInfo, {
                  [btnInfoTheme.btnInfoActive]: infoOpen
                })}
                onClick={toogleInfo}
              >
                <Icon icon={infoIcon} />
              </Button>
              <div className={styles.info}>
                <p
                  className={cx(styles.infoText, {
                    [styles.infoTextOpen]: infoOpen
                  })}
                >
                  Info
                </p>
              </div>
            </div>
            <div className={styles.descriptionContainer}>
              <div className={styles.descriptionLeft}>
                The poor disproportionately face climate risks such as sea level
                rise, increases in temperature and more erratic rainfall, often
                experienced as more frequent and extreme weather events such as
                storms, floods, and droughts. Because the poor are more exposed
                and sensitive to such impacts and generally have lower capacity
                to adapt, they are more vulnerable to climate change.
              </div>
              <div className={styles.descriptionRight}>
                Their vulnerability makes them less resilient to the impacts of
                climate change. Supporting the inclusion of the poor in planning
                and implementing adaptation actions can enable them to become
                more ready to adapt to climate change and reduce poverty.
              </div>
            </div>
          </div>
          {!this.props.ready ? (
            <Loading light className={styles.paddedBottom} />
          ) : (
            <div className={styles.cards}>
              {sectionData &&
                sectionData.map(section => (
                  <div className={styles.card} key={section.slug}>
                    {section.sectionType === 'LINK' ? (
                      <PrepLink />
                    ) : (
                      <Card title={section.title}>
                        <VulnerabilityGraph sectionData={section} />
                      </Card>
                    )}
                  </div>
                ))}
            </div>
          )}
        </div>
      </div>
    );
  }
}

CountryClimateVulnerability.propTypes = {
  infoOpen: Proptypes.bool,
  toogleInfo: Proptypes.func.isRequired,
  sectionData: Proptypes.array,
  ready: Proptypes.bool.isRequired
};

export default CountryClimateVulnerability;
