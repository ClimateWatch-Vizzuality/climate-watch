import React, { PureComponent } from 'react';
import PropTypes from 'prop-types';
import CircularChart from 'components/circular-chart';
import InfoIcon from 'components/info-icon';
import { COUNTRIES_NUMBER } from 'data/country-codes';
import styles from './vulnerability-graph-styles.scss';

class VulnerabilityGraph extends PureComponent {
  // eslint-disable-line react/prefer-stateless-function

  renderCircular() {
    const { sectionData } = this.props;
    const value = Math.floor(sectionData.data.value * 10) / 10;
    return (
      <div className={styles.circularChartContainer}>
        <InfoIcon
          infoOpen={false}
          toggleInfo={() => console.info('open')}
          right
          noPadding
        />
        <CircularChart value={value} />
        <div className={styles.absoluteRank}>
          <span>{sectionData.data.rank.absolute}</span>
          <span className={styles.countriesNumber}> of {COUNTRIES_NUMBER}</span>
        </div>
      </div>
    );
  }

  renderLine() {
    const { sectionData } = this.props;
    return `${sectionData.title} line`;
  }

  renderList() {
    const { sectionData } = this.props;
    return `${sectionData.title} list`;
  }

  renderLink() {
    const { sectionData } = this.props;
    return `${sectionData.title} link`;
  }

  render() {
    const { sectionData } = this.props;
    switch (sectionData.sectionType) {
      case 'gauge':
        return this.renderCircular();
      case 'line':
        return this.renderLine();
      case 'list':
        return this.renderList();
      case 'link':
        return this.renderLink();
      default:
        return null;
    }
  }
}

VulnerabilityGraph.propTypes = {
  sectionData: PropTypes.object
};

export default VulnerabilityGraph;
