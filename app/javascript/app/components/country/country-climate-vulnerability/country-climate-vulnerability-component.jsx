import React, { PureComponent } from 'react';
import Proptypes from 'prop-types';

import Card from 'components/card';
import VulnerabilityGraph from 'components/vulnerability-graph';
import AdaptationsProvider from 'providers/adaptations-provider';
import Loading from 'components/loading';
import ReactTooltip from 'react-tooltip';
import AbbrReplace from 'components/abbr-replace';

import layout from 'styles/layout.scss';

import PrepCard from './prep-card';
import styles from './country-climate-vulnerability-styles.scss';
// import styles from './climate-vulnerability-styles.scss';

class CountryClimateVulnerability extends PureComponent {
  // eslint-disable-line react/prefer-stateless-function
  render() {
    const { sectionData, definitions, countries } = this.props;
    return (
      <div className={styles.wrapper}>
        <div className={layout.content}>
          <div className={styles.header}>
            <div className={styles.titleContainer}>
              <AdaptationsProvider />
              <h3 className={styles.title}>
                Climate Vulnerability and Readiness
              </h3>
              <AbbrReplace>
                <div className={styles.descriptionContainer}>
                  <div className="grid-column-item">
                    The poor are disproportionately affected by
                    <span
                      className={styles.tooltipTrigger}
                      data-tip={definitions.climateRisks}
                    >
                      {' '}
                      climate risks{' '}
                    </span>
                    such as sea level rise, increases in temperature and more
                    erratic rainfall, often experienced as more frequent and
                    extreme weather events such as storms, floods, and droughts.
                    Because the poor are more
                    <span
                      className={styles.tooltipTrigger}
                      data-tip={definitions.exposed}
                    >
                      {' '}
                      exposed{' '}
                    </span>
                    and
                    <span
                      className={styles.tooltipTrigger}
                      data-tip={definitions.sensitive}
                    >
                      {' '}
                      sensitive{' '}
                    </span>
                    to such impacts and generally have lower capacity and fewer
                    resources with which to adapt, they are more
                    <span
                      className={styles.tooltipTrigger}
                      data-tip={definitions.vulnerable}
                    >
                      {' '}
                      vulnerable{' '}
                    </span>
                    to climate change.
                  </div>
                  <div className="grid-column-item">
                    Their vulnerability makes them less
                    <span
                      className={styles.tooltipTrigger}
                      data-tip={definitions.resilient}
                    >
                      {' '}
                      resilient{' '}
                    </span>
                    to the impacts of climate change. Supporting the inclusion
                    of the poor in planning and implementing adaptation actions
                    and ensuring that a greater share of adaptation funding
                    reaches local communities can improve their{' '}
                    <span
                      className={styles.tooltipTrigger}
                      data-tip={definitions.ready}
                    >
                      readiness
                    </span>{' '}
                    to{' '}
                    <span
                      className={styles.tooltipTrigger}
                      data-tip={definitions.adapt}
                    >
                      adapt
                    </span>{' '}
                    to climate change and reduce poverty.
                  </div>
                </div>
              </AbbrReplace>
            </div>
            <ReactTooltip className={styles.tooltip} />
          </div>
          {!this.props.ready ? (
            <Loading light className={styles.paddedBottom} />
          ) : (
            <div className="grid-column-item">
              <div className={styles.cards}>
                {sectionData &&
                  sectionData.map(section => (
                    <div className={styles.card} key={section.slug}>
                      {section.sectionType === 'LINK' ? (
                        <PrepCard className={styles.prepCard} />
                      ) : (
                        <Card
                          title={section.title}
                          subtitle={section.subtitle}
                          contentFirst
                        >
                          <VulnerabilityGraph
                            sectionData={section}
                            countries={countries}
                          />
                        </Card>
                      )}
                    </div>
                  ))}
              </div>
            </div>
          )}
        </div>
      </div>
    );
  }
}

CountryClimateVulnerability.propTypes = {
  sectionData: Proptypes.array,
  ready: Proptypes.bool.isRequired,
  definitions: Proptypes.object.isRequired,
  countries: Proptypes.array
};

export default CountryClimateVulnerability;
